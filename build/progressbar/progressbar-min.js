(function(){var B=YAHOO.util.Dom,I=YAHOO.lang,a="yui-pb",d=a+"-mask",Z=a+"-bar",G=a+"-caption",W=G+"-container",Y=a+"-anim",O=a+"-tl",M=a+"-tr",L=a+"-bl",F=a+"-br",H="width",V="height",N="minValue",X="maxValue",J="value",A="anim",U="direction",D="ltr",R="rtl",g="ttb",Q="btt",E="barEl",C="maskEl",K="captionEl",T="textTemplate",c="start",f="progress",S="complete";var P=function(b){P.superclass.constructor.call(this,document.createElement("div"),b);this._init(b);};YAHOO.widget.ProgressBar=P;P.MARKUP=['<div class="',Z,'"></div><div class="',d,'"><div class="',O,'"></div><div class="',M,'"></div><div class="',L,'"></div><div class="',F,'"></div></div><div class="',W,'"><div class="',G,'"></div></div>'].join("");I.extend(P,YAHOO.util.Element,{_init:function(b){},initAttributes:function(i){P.superclass.initAttributes.call(this,i);this.set("innerHTML",P.MARKUP);this.addClass(a);var h,b=["id",H,V,"class","style"];while((h=b.pop())){if(h in i){this.set(h,i[h]);}}this.setAttributeConfig(E,{readOnly:true,value:this.getElementsByClassName(Z)[0]});this.setAttributeConfig(C,{readOnly:true,value:this.getElementsByClassName(d)[0]});this.setAttributeConfig(K,{value:this.getElementsByClassName(G)[0],validator:function(j){return(I.isString(j)&&B.get(j))||(I.isObject(j)&&j.ownerDocument==document);},setter:function(j){return B.get(j);}});this.setAttributeConfig(U,{value:D,validator:function(j){if(this._rendered){return false;}switch(j){case D:case R:case g:case Q:return true;default:return false;}},method:function(j){this._barSizeFunction=this._barSizeFunctions[this.get(A)?1:0][j];}});this.setAttributeConfig(X,{value:100,validator:I.isNumber,method:function(j){this.get("element").setAttribute("aria-valuemax",j);if(this.get(J)>j){this.set(J,j);}}});this.setAttributeConfig(N,{value:0,validator:I.isNumber,method:function(j){this.get("element").setAttribute("aria-valuemin",j);if(this.get(J)<j){this.set(J,j);}}});this.setAttributeConfig(H,{getter:function(){return this.getStyle(H);},method:this._widthChange});this.setAttributeConfig(V,{getter:function(){return this.getStyle(V);},method:this._heightChange});this.setAttributeConfig(T,{value:"{value}"});this.setAttributeConfig(J,{value:0,validator:function(j){return I.isNumber(j)&&j>=this.get(N)&&j<=this.get(X);},method:this._valueChange});this.setAttributeConfig(A,{validator:function(j){return !!YAHOO.util.Anim;},setter:this._animSetter});},render:function(h,i){if(this._rendered){return;}this._rendered=true;var j=this.get(U);this.addClass(a);this.addClass(a+"-"+j);var b=this.get("element");b.tabIndex=0;b.setAttribute("role","progressbar");b.setAttribute("aria-valuemin",this.get(N));b.setAttribute("aria-valuemax",this.get(X));this.appendTo(h,i);this._barSizeFunction=this._barSizeFunctions[0][j];this.redraw();this._fixEdges();if(this.get(A)){this._barSizeFunction=this._barSizeFunctions[1][j];}this.on("minValueChange",this.redraw);this.on("maxValueChange",this.redraw);return this;},redraw:function(){this._recalculateConstants();this._valueChange(this.get(J));},destroy:function(){this.set(A,false);this.unsubscribeAll();this.get(K).innerHTML="";var b=this.get("element");b.parentNode.removeChild(b);},_previousValue:0,_barSpace:100,_barFactor:1,_rendered:false,_barSizeFunction:null,_heightChange:function(b){if(I.isNumber(b)){b+="px";}this.setStyle(V,b);this._fixEdges();this.redraw();},_widthChange:function(b){if(I.isNumber(b)){b+="px";}this.setStyle(H,b);this._fixEdges();this.redraw();},_fixEdges:function(){if(!this._rendered||YAHOO.env.ua.ie||YAHOO.env.ua.gecko){return;}var j=this.get(C),l=B.getElementsByClassName(O,undefined,j)[0],i=B.getElementsByClassName(M,undefined,j)[0],k=B.getElementsByClassName(L,undefined,j)[0],h=B.getElementsByClassName(F,undefined,j)[0],b=(parseInt(B.getStyle(j,V),10)-parseInt(B.getStyle(l,V),10))+"px";B.setStyle(k,V,b);B.setStyle(h,V,b);b=(parseInt(B.getStyle(j,H),10)-parseInt(B.getStyle(l,H),10))+"px";B.setStyle(i,H,b);B.setStyle(h,H,b);},_recalculateConstants:function(){var b=this.get(E);switch(this.get(U)){case D:case R:this._barSpace=parseInt(this.get(H),10)-(parseInt(B.getStyle(b,"marginLeft"),10)||0)-(parseInt(B.getStyle(b,"marginRight"),10)||0);break;case g:case Q:this._barSpace=parseInt(this.get(V),10)-(parseInt(B.getStyle(b,"marginTop"),10)||0)-(parseInt(B.getStyle(b,"marginBottom"),10)||0);break;}this._barFactor=this._barSpace/(this.get(X)-(this.get(N)||0))||1;},_animSetter:function(j){var i,b=this.get(E);if(j){if(j instanceof YAHOO.util.Anim){i=j;}else{i=new YAHOO.util.Anim(b);}i.onTween.subscribe(this._animOnTween,this,true);i.onComplete.subscribe(this._animComplete,this,true);var k=i.setAttribute,h=this;switch(this.get(U)){case Q:i.setAttribute=function(l,n,m){n=Math.round(n);k.call(this,l,n,m);B.setStyle(b,"top",(h._barSpace-n)+"px");};break;case R:i.setAttribute=function(l,n,m){n=Math.round(n);k.call(this,l,n,m);B.setStyle(b,"left",(h._barSpace-n)+"px");};break;}}else{i=this.get(A);if(i){i.onTween.unsubscribeAll();i.onComplete.unsubscribeAll();}i=null;}this._barSizeFunction=this._barSizeFunctions[i?1:0][this.get(U)];return i;},_animComplete:function(){var b=this.get(J);this._previousValue=b;this.fireEvent(S,b);B.removeClass(this.get(E),Y);this._showTemplates(b,true);},_animOnTween:function(){var b=Math.floor(this._tweenFactor*this.get(A).currentFrame+this._previousValue);this.fireEvent(f,b);this._showTemplates(b,false);},_valueChange:function(j){var i=this.get(A),b=Math.floor((j-this.get(N))*this._barFactor),h=this.get(E);this._showTemplates(j,true);if(this._rendered){if(i){i.stop();if(i.isAnimated()){i._onComplete.fire();}}this.fireEvent(c,this._previousValue);this._barSizeFunction(j,b,h,i);}},_showTemplates:function(j,h){var i=this.get(K),b=this.get("element"),k=I.substitute(this.get(T),{value:j,minValue:this.get(N),maxValue:this.get(X)});if(i){i.innerHTML=k;}if(h){b.setAttribute("aria-valuenow",j);b.setAttribute("aria-valuetext",i.innerText||i.textContent);}}});var e=[{},{}];P.prototype._barSizeFunctions=e;e[0][D]=function(j,b,h,i){B.setStyle(h,H,b+"px");
this.fireEvent(f,j);this.fireEvent(S,j);};e[0][R]=function(j,b,h,i){B.setStyle(h,H,b+"px");B.setStyle(h,"left",(this._barSpace-b)+"px");this.fireEvent(f,j);this.fireEvent(S,j);};e[0][g]=function(j,b,h,i){B.setStyle(h,V,b+"px");this.fireEvent(f,j);this.fireEvent(S,j);};e[0][Q]=function(j,b,h,i){B.setStyle(h,V,b+"px");B.setStyle(h,"top",(this._barSpace-b)+"px");this.fireEvent(f,j);this.fireEvent(S,j);};e[1][D]=function(j,b,h,i){B.addClass(h,Y);this._tweenFactor=(j-this._previousValue)/i.totalFrames;i.attributes={width:{to:b}};i.animate();};e[1][R]=e[1][D];e[1][g]=function(j,b,h,i){B.addClass(h,Y);this._tweenFactor=(j-this._previousValue)/i.totalFrames;i.attributes={height:{to:b}};i.animate();};e[1][Q]=e[1][g];})();YAHOO.register("progressbar",YAHOO.widget.ProgressBar,{version:"@VERSION@",build:"@BUILD@"});